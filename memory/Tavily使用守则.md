# Tavily 使用守则

## 重要警告

- **每天使用上限**: 150万 tokens
- **错误码**: 429（表示已达上限）
- **后果**: 报429后无法正常工作，可能导致断联
- **已设置超时返回**: 8秒超时自动返回，防止卡死

## 使用原则

### 1. 优先使用缓存/已有信息
- 先检查 memory/资讯库/ 是否已有相关内容
- 能用已有知识的，就不要搜索

### 2. 遇到429怎么办
- **立即停止搜索**
- 记录当天日期，24小时内不再调用
- 第二天00:00自动解除
- 告诉用户 API 已达上限

### 3. 搜索后记录
- 每次搜索后记录到 memory/资讯库/
- 避免重复搜索相同内容

## 异常处理机制（已修复）

1. **专门检测429错误** - 限额用完会明确报错
2. **连续3次错误后冷却** - 1分钟内不再访问
3. **8秒超时** - 比之前短，快刀斩乱麻
4. **手动重置** - 可以随时清除冷却状态

### 新增：24小时封锁机制
- 触发429限额后，记录当天日期到文件
- 当天（24小时内）不再调用Tavily
- 第二天00:00自动解除封锁
- **我可以通过文件操作手动解除封锁**（读写记录文件）

## 违规后果

- 触发429 → 无法正常工作 → 可能断联
- 必须严格遵守！

