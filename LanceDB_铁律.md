# LanceDB Pro 记忆插件使用铁律

## 核心原则

### 1. 自动捕获记忆
- 遇到踩坑、报错、解决方案时，自动写入 LanceDB
- 学习新技能、方法论时，立即存入记忆
- 配置变更、环境设置，记录详细步骤

### 2. 自动回忆记忆
- 每次会话开始时，主动检索相关经验
- 遇到相似问题时，优先搜索历史解决方案
- 执行操作前，查询是否有已知的坑点

### 3. 记忆内容标准

#### 必须记录的内容：
- **踩坑记录**：现象 → 原因 → 解决方案
- **方法论**：最佳实践、设计模式、架构原则
- **配置经验**：环境设置、参数调优、版本兼容
- **工具使用**：命令用法、常见错误、解决技巧

#### 记录格式：
```
[类型] 简短标题
- 背景/场景
- 问题描述
- 解决方案
- 相关命令/代码
- 经验教训
```

### 4. Scope 使用规范

| Scope | 用途 | 示例 |
|-------|------|------|
| global | 通用知识、跨项目经验 | Git使用、Linux命令 |
| medical-tourism | 医疗旅游项目专属 | 医院数据、页面配置 |
| longkangjin | 龙康劲项目专属 | 人设内容、运营策略 |
| session | 当前会话临时 | 待确认事项 |

### 5. 检索策略

#### 混合检索优势：
- **向量检索**：语义理解，找相似概念
- **BM25检索**：精准匹配，找关键词
- **Re-rank**：重排序，提高相关性
- **MMR去重**：多样性，避免重复结果

#### 使用时机：
- 新会话开始 → 检索项目背景
- 遇到报错 → 检索错误信息
- 配置环境 → 检索相关配置经验
- 代码开发 → 检索最佳实践

### 6. 记忆维护

#### 定期清理：
- 删除过时的配置（版本升级后）
- 合并重复的经验条目
- 更新已被改进的解决方案

#### 备份策略：
- 重大变更前导出记忆
- 定期备份 LanceDB 数据库
- 重要经验手动记录到 MEMORY.md

### 7. 认知纪律

- **调用任何工具失败或报错后** → 搜索经验再重试
- **逻辑改动后** → 必须测试验证
- **多 Agent 协作** → 交叉审查避免遗漏
- **遇到重复问题** → 反思为何记忆未命中

## 执行命令

### 手动触发记忆
- `/memory store [content]` - 存储记忆
- `/memory recall [query]` - 检索记忆
- `/memory scope [scope-name]` - 切换 scope

### 查看统计
- `/memory stats` - 查看记忆统计
- `/memory list` - 列出最近记忆

---
*本铁律配合 LanceDB Pro 插件使用，确保 OpenClaw 越用越聪明*
